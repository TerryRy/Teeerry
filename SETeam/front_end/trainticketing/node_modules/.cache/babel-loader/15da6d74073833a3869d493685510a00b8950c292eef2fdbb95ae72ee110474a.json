{"ast":null,"code":"import { createVNode as _createVNode } from \"vue\";\nimport { ref, reactive, onMounted, defineComponent } from \"vue\";\nimport { inBrowser, makeNumberProp, makeStringProp, createNamespace, preventDefault } from \"../utils/index.mjs\";\nimport { useRect } from \"@vant/use\";\nimport { Button } from \"../button/index.mjs\";\nconst [name, bem, t] = createNamespace(\"signature\");\nconst signatureProps = {\n  tips: String,\n  type: makeStringProp(\"png\"),\n  penColor: makeStringProp(\"#000\"),\n  lineWidth: makeNumberProp(3),\n  clearButtonText: String,\n  confirmButtonText: String\n};\nconst hasCanvasSupport = () => {\n  var _a;\n  const canvas = document.createElement(\"canvas\");\n  return !!((_a = canvas.getContext) == null ? void 0 : _a.call(canvas, \"2d\"));\n};\nvar stdin_default = defineComponent({\n  name,\n  props: signatureProps,\n  emits: [\"submit\", \"clear\", \"start\", \"end\", \"signing\"],\n  setup(props, {\n    emit\n  }) {\n    const canvasRef = ref();\n    const wrapRef = ref();\n    const state = reactive({\n      width: 0,\n      height: 0,\n      ctx: null\n    });\n    let canvasRect;\n    const isRenderCanvas = inBrowser ? hasCanvasSupport() : true;\n    const touchStart = () => {\n      if (!state.ctx) {\n        return false;\n      }\n      state.ctx.beginPath();\n      state.ctx.lineWidth = props.lineWidth;\n      state.ctx.strokeStyle = props.penColor;\n      canvasRect = useRect(canvasRef);\n      emit(\"start\");\n    };\n    const touchMove = event => {\n      var _a, _b;\n      if (!state.ctx) {\n        return false;\n      }\n      preventDefault(event);\n      const touch = event.touches[0];\n      const mouseX = touch.clientX - ((canvasRect == null ? void 0 : canvasRect.left) || 0);\n      const mouseY = touch.clientY - ((canvasRect == null ? void 0 : canvasRect.top) || 0);\n      state.ctx.lineCap = \"round\";\n      state.ctx.lineJoin = \"round\";\n      (_a = state.ctx) == null ? void 0 : _a.lineTo(mouseX, mouseY);\n      (_b = state.ctx) == null ? void 0 : _b.stroke();\n      emit(\"signing\", event);\n    };\n    const touchEnd = event => {\n      preventDefault(event);\n      emit(\"end\");\n    };\n    const isCanvasEmpty = canvas => {\n      const empty = document.createElement(\"canvas\");\n      empty.width = canvas.width;\n      empty.height = canvas.height;\n      return canvas.toDataURL() === empty.toDataURL();\n    };\n    const submit = () => {\n      const canvas = canvasRef.value;\n      if (!canvas) {\n        return;\n      }\n      const isEmpty = isCanvasEmpty(canvas);\n      const image = isEmpty ? \"\" : canvas.toDataURL(`image/${props.type}`, props.type === \"jpg\" ? 0.9 : null);\n      emit(\"submit\", {\n        image,\n        canvas\n      });\n    };\n    const clear = () => {\n      if (state.ctx) {\n        state.ctx.clearRect(0, 0, state.width, state.height);\n        state.ctx.closePath();\n      }\n      emit(\"clear\");\n    };\n    onMounted(() => {\n      var _a, _b, _c;\n      if (isRenderCanvas) {\n        state.ctx = (_a = canvasRef.value) == null ? void 0 : _a.getContext(\"2d\");\n        state.width = ((_b = wrapRef.value) == null ? void 0 : _b.offsetWidth) || 0;\n        state.height = ((_c = wrapRef.value) == null ? void 0 : _c.offsetHeight) || 0;\n      }\n    });\n    return () => _createVNode(\"div\", {\n      \"class\": bem()\n    }, [_createVNode(\"div\", {\n      \"class\": bem(\"content\"),\n      \"ref\": wrapRef\n    }, [isRenderCanvas ? _createVNode(\"canvas\", {\n      \"ref\": canvasRef,\n      \"width\": state.width,\n      \"height\": state.height,\n      \"onTouchstartPassive\": touchStart,\n      \"onTouchmove\": touchMove,\n      \"onTouchend\": touchEnd\n    }, null) : _createVNode(\"p\", null, [props.tips])]), _createVNode(\"div\", {\n      \"class\": bem(\"footer\")\n    }, [_createVNode(Button, {\n      \"size\": \"small\",\n      \"onClick\": clear\n    }, {\n      default: () => [props.clearButtonText || t(\"clear\")]\n    }), _createVNode(Button, {\n      \"type\": \"primary\",\n      \"size\": \"small\",\n      \"onClick\": submit\n    }, {\n      default: () => [props.confirmButtonText || t(\"confirm\")]\n    })])]);\n  }\n});\nexport { stdin_default as default, signatureProps };","map":{"version":3,"names":["createVNode","_createVNode","ref","reactive","onMounted","defineComponent","inBrowser","makeNumberProp","makeStringProp","createNamespace","preventDefault","useRect","Button","name","bem","t","signatureProps","tips","String","type","penColor","lineWidth","clearButtonText","confirmButtonText","hasCanvasSupport","_a","canvas","document","createElement","getContext","call","stdin_default","props","emits","setup","emit","canvasRef","wrapRef","state","width","height","ctx","canvasRect","isRenderCanvas","touchStart","beginPath","strokeStyle","touchMove","event","_b","touch","touches","mouseX","clientX","left","mouseY","clientY","top","lineCap","lineJoin","lineTo","stroke","touchEnd","isCanvasEmpty","empty","toDataURL","submit","value","isEmpty","image","clear","clearRect","closePath","_c","offsetWidth","offsetHeight","default"],"sources":["D:/大学学习/2023春课程文件/软件工程基础/Teeerry/SETeam/front_end/trainticketing/node_modules/vant/es/signature/Signature.mjs"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { ref, reactive, onMounted, defineComponent } from \"vue\";\nimport { inBrowser, makeNumberProp, makeStringProp, createNamespace, preventDefault } from \"../utils/index.mjs\";\nimport { useRect } from \"@vant/use\";\nimport { Button } from \"../button/index.mjs\";\nconst [name, bem, t] = createNamespace(\"signature\");\nconst signatureProps = {\n  tips: String,\n  type: makeStringProp(\"png\"),\n  penColor: makeStringProp(\"#000\"),\n  lineWidth: makeNumberProp(3),\n  clearButtonText: String,\n  confirmButtonText: String\n};\nconst hasCanvasSupport = () => {\n  var _a;\n  const canvas = document.createElement(\"canvas\");\n  return !!((_a = canvas.getContext) == null ? void 0 : _a.call(canvas, \"2d\"));\n};\nvar stdin_default = defineComponent({\n  name,\n  props: signatureProps,\n  emits: [\"submit\", \"clear\", \"start\", \"end\", \"signing\"],\n  setup(props, {\n    emit\n  }) {\n    const canvasRef = ref();\n    const wrapRef = ref();\n    const state = reactive({\n      width: 0,\n      height: 0,\n      ctx: null\n    });\n    let canvasRect;\n    const isRenderCanvas = inBrowser ? hasCanvasSupport() : true;\n    const touchStart = () => {\n      if (!state.ctx) {\n        return false;\n      }\n      state.ctx.beginPath();\n      state.ctx.lineWidth = props.lineWidth;\n      state.ctx.strokeStyle = props.penColor;\n      canvasRect = useRect(canvasRef);\n      emit(\"start\");\n    };\n    const touchMove = (event) => {\n      var _a, _b;\n      if (!state.ctx) {\n        return false;\n      }\n      preventDefault(event);\n      const touch = event.touches[0];\n      const mouseX = touch.clientX - ((canvasRect == null ? void 0 : canvasRect.left) || 0);\n      const mouseY = touch.clientY - ((canvasRect == null ? void 0 : canvasRect.top) || 0);\n      state.ctx.lineCap = \"round\";\n      state.ctx.lineJoin = \"round\";\n      (_a = state.ctx) == null ? void 0 : _a.lineTo(mouseX, mouseY);\n      (_b = state.ctx) == null ? void 0 : _b.stroke();\n      emit(\"signing\", event);\n    };\n    const touchEnd = (event) => {\n      preventDefault(event);\n      emit(\"end\");\n    };\n    const isCanvasEmpty = (canvas) => {\n      const empty = document.createElement(\"canvas\");\n      empty.width = canvas.width;\n      empty.height = canvas.height;\n      return canvas.toDataURL() === empty.toDataURL();\n    };\n    const submit = () => {\n      const canvas = canvasRef.value;\n      if (!canvas) {\n        return;\n      }\n      const isEmpty = isCanvasEmpty(canvas);\n      const image = isEmpty ? \"\" : canvas.toDataURL(`image/${props.type}`, props.type === \"jpg\" ? 0.9 : null);\n      emit(\"submit\", {\n        image,\n        canvas\n      });\n    };\n    const clear = () => {\n      if (state.ctx) {\n        state.ctx.clearRect(0, 0, state.width, state.height);\n        state.ctx.closePath();\n      }\n      emit(\"clear\");\n    };\n    onMounted(() => {\n      var _a, _b, _c;\n      if (isRenderCanvas) {\n        state.ctx = (_a = canvasRef.value) == null ? void 0 : _a.getContext(\"2d\");\n        state.width = ((_b = wrapRef.value) == null ? void 0 : _b.offsetWidth) || 0;\n        state.height = ((_c = wrapRef.value) == null ? void 0 : _c.offsetHeight) || 0;\n      }\n    });\n    return () => _createVNode(\"div\", {\n      \"class\": bem()\n    }, [_createVNode(\"div\", {\n      \"class\": bem(\"content\"),\n      \"ref\": wrapRef\n    }, [isRenderCanvas ? _createVNode(\"canvas\", {\n      \"ref\": canvasRef,\n      \"width\": state.width,\n      \"height\": state.height,\n      \"onTouchstartPassive\": touchStart,\n      \"onTouchmove\": touchMove,\n      \"onTouchend\": touchEnd\n    }, null) : _createVNode(\"p\", null, [props.tips])]), _createVNode(\"div\", {\n      \"class\": bem(\"footer\")\n    }, [_createVNode(Button, {\n      \"size\": \"small\",\n      \"onClick\": clear\n    }, {\n      default: () => [props.clearButtonText || t(\"clear\")]\n    }), _createVNode(Button, {\n      \"type\": \"primary\",\n      \"size\": \"small\",\n      \"onClick\": submit\n    }, {\n      default: () => [props.confirmButtonText || t(\"confirm\")]\n    })])]);\n  }\n});\nexport {\n  stdin_default as default,\n  signatureProps\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}