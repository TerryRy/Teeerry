# 铁路售票系统 文本需求

## 1

```md
当用户选择注册时，系统应该允许用户输入用户名.密码.电子邮件和其他个人信息，并验证这些信息的有效性。如果信息有效，系统应该创建一个新的用户账户，并提示用户注册成功。如果信息无效，系统应该提示用户重新输入或取消注册

基本流程 {
    （用户）1.用户点击“注册”按钮
    （系统）2.系统打开注册界面
    （用户）3.用户输入用户名.密码.电子邮件和其他个人信息
    （系统）4.系统向用户发送验证信息
    （用户）5.用户验证信息正确性，系统做出响应
        （选择）5a.信息有效
            （系统）1.系统用以上信息创建新的用户账户，并提示用户注册成功。
        （选择）5b.信息无效
            （系统）1.提示用户重新输入
}

扩展流程 {
    （可选）*a.用户放弃当前任务，选择返回登陆界面
        （用户）1.点击“返回”按钮
        （系统）2.放弃当前动作，返回登陆界面
    （可选）5b1a.取消注册
        （用户）1.用户点击“取消注册”按钮
        （系统）2.放弃当前动作，返回登陆界面
}
```

## 2

```md
当用户选择账户设置时，系统应该显示用户的当前账户列表，并提供添加新账户的选项。如果用户选择添加新账户，系统应该允许用户输入账户名称.类型和初始余额，并验证这些信息的有效性。如果信息有效，系统应该创建一个新的账户，并提示用户添加成功。如果信息无效，系统应该提示用户重新输入或取消添加

当用户选择一个已有的账户时，系统应该显示该账户的详细信息，并提供充值的选项。如果用户选择充值，系统应该允许用户输入充值金额，并验证该金额的有效性。如果金额有效，系统应该更新该账户的余额，并提示用户充值成功。如果金额无效，系统应该提示用户重新输入或取消充值。

基本流程 {
    （可选）*a.用户放弃当前任务，选择返回主页
        （用户）1.点击“主页”按钮
        （系统）2.放弃当前动作，返回主页
    （异常处理）*b.系统发生错误（网络等原因）
        （系统）1.系统应向用户提示相应错误信息。
        （用户）2.用户应退出并可能重试。
    （用户）1.用户点击“账户设置”按钮
    （系统）2.显示器显示用户当前账户列表，以及“添加新用户”按钮
    （用户）3.选择账户
        （选择）3a.用户选择添加新账户
            （用户）1.用户点击“添加新账户”按钮
            （系统）2.系统打开输入账户信息界面
            （用户）3.输入账户名称和类型
            （系统）4.向用户发送验证信息
            （用户）5.验证信息正确性，系统做出响应
                （选择）5a.信息有效
                    （系统）1.根据上述信息创建一个新账户，并提示用户添加账户成功
                （选择）5b.信息无效
                    （系统）1.提示用户重新输入
        （选择）3b.用户选择已有账户
            （用户）1.用户点击已有的某个账户的按钮
            （系统）2.系统显示该账户的详细信息，并提供充值选项
}

扩展流程 {
    （异常处理）*b.系统发生错误（网络等原因）
        （系统）1.系统应向用户提示相应错误信息。
        （用户）2.用户应退出并可能重试。
    （可选）3a5b1a.用户选择取消添加账户
        （用户）1.点击“取消添加账户”按钮
        （系统）2.放弃当前动作，返回账户列表界面

    (可选)3b2a.用户选择充值
        （用户）1.用户点击“充值”按钮
        （系统）2.系统打开输入充值金额页面
        （系统）3.向用户发送验证信息
        （用户）4.验证金额有效性，系统做出响应
            （选择）4a.信息有效
                （系统）1.更新该账户余额，并提示充值成功
            （选择）4b.信息无效
                （系统）1.提示用户重新输入
                （可选）1a.用户选择取消充值
                    （用户）1.用户点击“取消充值”按钮
                    （系统）2.放弃当前动作，返回显示账户详细信息界面
}

非功能需求 {
    1.系统出现错误时，能够及时报告错误信息并提供退出方式
    2.95%的情况下添加新账户时间（提交添加账户申请到切换到新账户登录状态）不超过3秒，充值时间（有效性检查和充值任务执行）不超过5秒。
}
```

## 3

```md
作为一个管理员，我想要查看用户及用户账户信息，以便于管理用户和账户。
基本流程 {
    （用户） 1.用户应点击“管理”按钮。
    （系统） 2.系统应显示验证管理员身份界面。
    （用户） 3.用户应出示相应证明。
    （系统） 4.系统应验证用户的管理员身份。
    （系统） 5.系统应显示所有的用户列表及相应的用户账户列表。
    （用户） 6.用户应选择需要进行操作的用户或账户。
    （系统） 7.系统应显示相应的用户或账户信息。
    （用户） 8.用户应选择需要的进行的管理操作并进行操作。
    （系统） 9.系统应进行相应的操作。
    （系统） 10.系统应提示用户确认。
    （用户） 11.用户应确认本次操作。
    （系统） 12.系统应根据用户的相应操作更改相应信息。
    （系统） 13.系统应记录本次操作的日志。
    （系统） 14.系统应显示操作成功。
    （循环5~14直至输入结束）
    （用户） 15.用户应退出相应管理界面。
}

扩展流程 {
    （异常处理）*a.系统发生错误：
        （系统）1.系统应向用户提示相应错误信息。
        （用户）2.用户应退出界面。
    （异常处理）4a.管理员身份验证失败：
        （系统）1.系统应显示管理员身份验证失败的提示。
        （系统）2.系统应退出界面。
    （可选）6~10a.用户在确认操作前的任意步骤中，都应能撤回到之前的步骤。
    （选择）6a.用户选择查看信息：
    （选择）6b.用户选择修改信息：
        （用户）1.用户应选择需要更改的信息。
        （用户）2.用户应输入更改后的信息。
    （选择）6c.用户选择删除信息：
        （用户）1.用户应选择需要删除的信息。
    （选择）6d.用户选择添加信息：
        （用户）1.用户应输入需要添加的信息。
}

非功能需求：{
    1.在系统出现错误时，能够及时发现错误信息并提示。
    2.在95％的情况下，一般时段响应时间不超过1.5秒，高峰时段不超过4秒。
}
```

## 4

```md
作为一个铁路系统员，我想要输入火车铁路运行车次信息，以便于设置火车铁路运行车次
基本流程 {
    （用户） 1.用户点击“输入车次信息”按钮。
    （系统） 2.系统应显示输入信息界面。
    （用户） 3.用户应新建一车次，并输入该车次的火车信息.起始火车站台以及沿途的火车站台信息.火车不同的座位信息.发车日期时间以及到各个站台的时间。
    （系统） 4.系统应验证信息的有效性和一致性。
    （系统） 5.系统应显示所有输入的信息，并提示用户确认。
    （用户） 6.用户应确认信息。
    （系统） 7.系统应创建相应的新的火车铁路运行车次。
    （系统） 8.提示设置车次信息成功。
}

扩展流程 {
    （异常处理）*a.系统发生错误：
        （系统）1.系统应向用户提示相应错误信息。
        （用户）2.用户应退出并可能重试。
    （可选）3~5a.用户在确认信息前的任意步骤中，都应能撤回到之前的步骤。
    （异常处理）4a.验证信息无效或不一致：
        （系统）1.系统应向用户提示“验证信息错误”。
        （用户）2.用户应修改输入信息。
}

非功能需求：{
    1.在系统出现错误时，能够及时发现错误信息并提示。
    2.在95％的情况下，一般时段响应时间不超过1.5秒，高峰时段不超过4秒。
}
```

## 5

```md
作为一个用户，我想要查询火车车次，以便于选择适合自己的车次
基本流程 {
    （用户） 1.用户点击“输入”按钮。
    （用户） 2. 用户输入起点.终点以及乘坐日期。
    （系统） 3. 系统验证信息的有效性。
        （选择） 3a. 信息有效
            （系统） 1.返回该天所有能满足用户需求的车次信息（包括起始点满足，以及沿途的火车站台也能满足）
        （选择）3b. 信息无效
            （系统） 1.提示用户重新输入或取消查询
}

扩展流程 {
    （异常处理）*b.系统发生错误（网络等原因）
        （系统）1.系统应向用户提示相应错误信息。
        （用户）2.用户应退出并可能重试。
    （可选）1a.用户选择高级需求按钮
        （系统） 1. 显示不同的条件选项
​        （用户） 2. 选择一个或者多个条件
        （系统） 3. 根据用户选择的条件对车次进行排序或者过滤
​        （系统） 4. 返回结果给用户
    （可选）2a.用户选择中转按钮
        （系统） 1. 所有可以通过一次或多次中转到达终点的车次组合
​        （系统） 2. 显示每个组合的总价格.总时间和中转次数
        （系统） 3. 根据用户选择的高级需求条件对车次进行排序或者过滤（系统） 4. 返回结果给用户
}

非功能需求：{
    1.在系统出现错误时，能够及时发现错误信息并提示。
    2.在95％的情况下，一般时段响应时间不超过1.5秒，高峰时段不超过4秒。在非高峰时间根据起始地点和日期等特定条件进行搜索，可以在2秒内得到搜索结果。
    3.系统应该保证用户只能查看和删除自己的订单，不能查看和删除其他用户的订单。
}
```

## 6

```md
作为一个用户，我想要购票，以便乘火车出行
基本流程 {
    （用户）1. 用户应输入起始城市.目的地城市.日期
    （系统）2. 系统应根据用户输入查询符合条件的行程和座位信息
    （用户）3. 用户应选择行程和座位类型
    （系统）4. 系统应录入用户的行程选择
    （系统）5. 系统应列出联系人供用户选择
    （用户）6. 用户应设定某一联系人完成预定
    （系统）7. 系统应向用户显示订票金额
    （用户）8. 用户应支付订票金额
}

扩展流程 {
    （可选）*a. 用户在购票的任意步骤中，都应能撤回到之前的步骤
    （异常处理）*a. 系统在任何时间点发生错误
        （系统）1. 系统应输出异常日志
        （系统）2. 系统应告知用户发生异常
        （系统）3. 系统应保存用户已填写的信息，重新开始订票
    （异常处理）*b. 用户在任何时间点与系统断开连接
        （系统）1. 系统应保存用户已填写的信息
        （系统）2. 当用户重新登录系统时，系统应恢复本次购票流程。
    （异常处理）3a. 用户选择行程和座位类型，但并未登陆
        （系统）1. 系统应提醒用户登陆
    （选择）5a. 用户选择使用已有联系人
        （用户）1. 用户应选择联系人
        （系统）2. 系统应将用户的选择设定为本车票的联系人
    （选择）5b. 用户选择添加联系人
        （用户）1. 用户应输入新联系人的身份信息
        （系统）2. 系统应审核身份信息的正确性
            （选择）2a. 审核通过
                （系统）1. 系统应将新的联系人设定为本车票的联系人
            （选择）2b. 审核不通过
                （系统）1. 系统应提醒用户联系人信息存在错误
                （用户）2. 用户应重新填写新联系人的身份信息
                （重复5直到设定了成功设定某一联系人）
    （选择）7a. 用户选择立即支付
        （用户）1. 用户应直接进入线上支付系统进行支付
        （系统）2. 系统应完成收款，结束购票流程
    （选择）7b. 用户选择之后支付
        （用户）1. 用户应结束购票
        （用户）2. 用户应在订单列表中找到之前预订的票，点击支付按钮
        （用户）3. 用户应进入线上支付系统进行支付
        （系统）2. 系统应完成收款，结束购票流程
}

非功能性需求 {
    1. 在95％的情况下，一般时段响应时间不超过1.5秒，高峰时段不超过4秒。在非高峰时间根据起始地点和日期等特定条件进行搜索，可以在2秒内得到搜索结果。
    2. 严格权限访问控制，不同的用户具有不同的身份和权限，需要在用户身份真实可信的前提下，保护数据不被非法/越权访问和篡改，要确保数据的机密性和完整性。
}
```

## 7

```md
作为一个用户，我想要查看订单， 以便于对不同订单做相应的操作
基本流程 {
    （用户） 1.用户点击“订单”按钮。
    （系统） 2.系统应显示用户的订单列表，包括已完成和未完成的订单。
}

扩展流程 {
    （异常处理）*b.系统发生错误（网络等原因：
        （系统）1.系统应向用户提示相应错误信息。
        （用户）2.用户应退出并可能重试。
    （可选）2a.用户选择删除订单
        （系统）1.检查订单状态，判断是否为已过期或未支付的订单（选择a1，b1，c1）
                （选择）a1.是已过期或未支付的订单
                    （系统）1.删除订单
                    （系统）2.更新订单列表
                （选择）b1.不是已过期或未支付的订单
                    （系统）1.提示用户原因
                    （系统）2.取消删除操作
                （选择）c1.删除过程中出现错误
                    （系统）1.提示用户原因
                    （系统）2.放弃删除操作
}

非功能需求：{
    1.在系统出现错误时，能够及时发现错误信息并提示。
    2.在95％的情况下，一般时段响应时间不超过1.5秒，高峰时段不超过4秒。在非高峰时间根据起始地点和日期等特定条件进行搜索，可以在2秒内得到搜索结果。
    3.系统应该保证用户只能查看和删除自己的订单，不能查看和删除其他用户的订单。
}
```

## 8

```md
作为一个用户，我想要取消订单
基本流程 {
    （用户） 1.用户点击“订单中心”按钮。
    （用户） 2. 用户点击取消订单。
    （系统） 3. 系统判断是否距离发车时间一个小时。
    ​   （选择） 3a. 是
    ​       （系统） 1.显示取消成功
            （系统） 2.退还用户支付的金额
        （选择）3b. 否
            （系统） 1.提示用户取消失败
}
```

## 9

```md
作为一个用户，我想要改签， 以便于切换到更适宜的车次
基本流程 {
    （用户） 1.用户点击“改签”按钮。
    （系统） 2.系统应显示用户的原始订单信息，包括起始点.目的地.时间和价格。
    （用户） 3.用户应选择改签后的目的地
    （系统） 4.系统应显示所有可以改签到的车票信息，满足“改签的起始点与原始订单一致，且改签的新时间不能超过原始时间的24小时”
    （用户） 5.用户选择车票
    （系统） 6.系统应显示该车次的信息
    （5-6循环直到用户确定要改签或者放弃改签）
    （用户） 7.用户确认改签
    （系统） 8.系统应计算差价，并根据差价返还或收取费用
    （系统） 9.系统应取消原有订单，并创建新订单
    （系统） 10.系统应更新用户的订单列表
    （系统） 11.系统应提示用户改签成功
}

扩展流程 {
    （异常处理）*b.系统发生错误（网络等原因：
        （系统）1.系统应向用户提示相应错误信息。
        （用户）2.用户应退出并可能重试。
    （异常处理）*c.用户余额不足：
        （系统）1.系统应向用户提示“余额不足”。
        （用户）2.用户应切换到充值界面。
}

非功能需求：{
    1.在系统出现错误时，能够及时发现错误信息并提示
    2.在95％的情况下，一般时段响应时间不超过1.5秒，高峰时段不超过4秒。在非高峰时间根据起始地点和日期等特定条件进行搜索，可以在2秒内得到搜索结果。
    3.系统应该保证改签的起始点与原始订单一致，且改签的新时间不能超过原始时间的24小时。
}
```

## 10

```md
作为一个用户，我想要收到相应的订单更改消息，以便于及时了解我的改订单情况。
基本流程 {
    （用户） 1.用户更改订单信息。
    （系统） 2.系统应发送订单相关信息和状态给用户。
    （系统） 3.系统应提示操作成功。
}

非功能需求：{
    1.系统应保证信息的及时性和准确性，且不向用户发送无关或重复的消息。
}
```

## 11

```md
作为一个工作人员，我希望能够取消或延误车次，以通知用户车次取消和延迟的消息
基本流程 {
    （用户）1. 工作人员应修改车次信息或取消车次
    （系统）2. 系统应根据工作人员提供的信息，修改或取消车次
    （系统）3. 系统应通知所有购票的用户，并修改用户的订单信息
    （用户）4. 用户收到系统的通知，应选择是否免费改签
}

扩展流程 {
    （选择）4a. 用户选择不进行改签
    （选择）4b. 用户选择进行改签
        （用户）1. 用户应选择改签后的行程
        （系统）2. 系统应修改用户的订单信息
}

非功能性需求 {
    1. 系统消息应能再车次修改后及时发送给用户，可通过用户填写的手机.邮箱等信息多渠道进行通知
}
```
